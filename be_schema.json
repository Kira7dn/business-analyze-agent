{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Clean Architecture Backend Class Schema (Minimal)",
    "type": "object",
    "required": [
        "layer",
        "type",
        "name"
    ],
    "properties": {
        "layer": {
            "type": "string",
            "enum": [
                "domain",
                "application",
                "infrastructure",
                "presentation"
            ]
        },
        "type": {
            "type": "string",
            "enum": [
                "domain/entity",
                "domain/service",
                "application/interface",
                "application/use_case",
                "infrastructure/model",
                "infrastructure/repository",
                "infrastructure/adapter",
                "presentation/schema",
                "presentation/dependency",
                "presentation/router"
            ]
        },
        "name": {
            "type": "string"
        },
        "description": {
            "type": "string",
            "description": "Mô tả ngắn gọn về vai trò của class trong kiến trúc."
        },
        "properties": {
            "type": "object",
            "description": "Tập thuộc tính dạng key:value (field:type)",
            "additionalProperties": {
                "type": "string"
            }
        },
        "attributes": {
            "type": "array",
            "description": "Danh sách thuộc tính dạng 'name: type'",
            "items": {
                "type": "string"
            }
        },
        "methods": {
            "type": "array",
            "description": "Có thể là signature dạng chuỗi hoặc object chi tiết",
            "items": {
                "oneOf": [
                    {
                        "type": "string"
                    },
                    {
                        "type": "object",
                        "required": [
                            "method_name",
                            "description"
                        ],
                        "properties": {
                            "method_name": {
                                "type": "string"
                            },
                            "description": {
                                "type": "string"
                            },
                            "parameters": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "return_type": {
                                "type": "string"
                            }
                        },
                        "additionalProperties": false
                    }
                ]
            }
        },
        "dependencies": {
            "type": "array",
            "description": "Tên interface/lớp mà class phụ thuộc",
            "items": {
                "type": "string"
            }
        },
        "metadata": {
            "type": "object",
            "description": "Thông tin bổ sung (ports, adapters, endpoints, DTOs, v.v.)",
            "additionalProperties": true
        }
    },
    "additionalProperties": false
}